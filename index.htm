<!DOCTYPE html>
<html>

<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">

	<link rel="stylesheet" href="style.css">

	<!--<script src="https://unpkg.com/vue@next"></script>
	<script src="https://unpkg.com/vuex@4.0.0/dist/vuex.global.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>-->
	<script src="scripts/vue.global.prod.js"></script>
	<script src="scripts/vuex.global.js"></script>
	<script src="scripts/axios.min.js"></script>
</head>

<body>
	<div id="app-playlists">
		<details>
			<summary class="add_curser_pointer">
				Playlists <img src="icons/material-icons/library_music_black_24dp.svg" alt="Updates">
			</summary>
			<div id="card_select">
				<select v-model="update_uuid">
					<option disabled value="">Choose playlist</option>
					<option v-for="playlist in reactive_playlists.playlists" :value="playlist.uuid">
						{{ playlist.name }}
					</option>
				</select>
			</div>
			<div id="selected_album">
				<div id="card_edit" v-if="typeof reactive_current_playlist.uuid!='undefined'">
					<form>
						<input v-model.lazy="update_name" type="text" placeholder='' @keypress.enter.prevent />
					</form>
					<input type="range" min="0" v-bind:max="20" v-model.number="reactive_current_playlist.volume"
						@change="onChangeVolume()" class="add_curser_pointer">

					<img src="icons/material-icons/volume_up_black_24dp.svg" alt="Volume UP">
				</div>
				<div id="card_image">
					<img src="icons/material-icons/album_black_24dp.svg" alt="Testalbumcovery"
						style="width: 200px; height: 200px;">
				</div>
			</div>
			<details>
				<summary class="add_curser_pointer">Titel</summary>
				<div id="card_tracks">
					<ol>
						<li v-for="(track,index) in reactive_current_playlist.tracks">
							{{ track.split('/').pop() }}
							<img src="icons/material-icons/remove_black_24dp.svg" class="deletetrack add_curser_pointer"
								v-on:click="reactive_current_playlist.deleteTracks(track)">
							<div v-if=index==reactive_current_playlist.curr_track>
								<img src="icons/material-icons/pause_black_24dp.svg" alt="Aktueller Titel">
								<input type="range" min="0" v-if="reactive_current_playlist.curr_max_timestamp>0"
									v-bind:max="reactive_current_playlist.curr_max_timestamp"
									v-model.number="reactive_current_playlist.curr_timestamp"
									@change="onChangeCurrTimestamp()">
							</div>
							<div v-else>
								<img src="icons/material-icons/play_circle_outline_black_24dp.svg"
									class="add_curser_pointer" alt="Aktueller Titel" v-on:click="onChangeTrack(index)">
							</div>
						</li>
					</ol>
				</div>
			</details>
		</details>
	</div>
	<div id="app-files">
		<details>
			<summary class="add_curser_pointer">
				Filesystem <img src="icons/material-icons/home_black_24dp.svg" alt="Updates">
			</summary>
			<ul id="directory">
				<!-- <ul id="directory" v-if="typeof reactive_current_playlist.uuid!='undefined'">-->
				<tree-item v-for="item in treeData" class="item" :class="{folder: item.isFolder}" v-bind:item="item">
				</tree-item>
			</ul>
		</details>
	</div>
	<div id="app-settings">
		<details>
			<summary class="add_curser_pointer">
				Einstellungen <img src="icons/material-icons/settings_black_24dp.svg" alt="Einstellungen">
			</summary>
			<div id="bluetooth" style="padding-left: 1em;">
				<details>
					<summary class="add_curser_pointer">
						Bluetooth <img src="icons/material-icons/bluetooth_black_24dp.svg" alt="Updates">
					</summary>
					<input type="radio" id="on" value="true" v-model="bluetooth_state" />
					<label for="on">ON</label>
					<input type="radio" id="off" value="false" v-model="bluetooth_state" />
					<label for="off">OFF</label>
				</details>
			</div>
			<div id="wifi" style="padding-left: 1em;">
				<details>
					<summary class="add_curser_pointer" v-on:click="scanWifis()">
						WiFi <img src="icons/material-icons/wifi_black_24dp.svg" alt="Updates">
					</summary>
					<table>
						<thead>
							<tr>
								<th>IDX</th>
								<th>SSID</th>
								<th>RSSI</th>
								<th>ENC</th>
								<th>PWD</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="(wifi,index) in wifis">
								<td>
									{{ wifi.IDX }}
								</td>
								<td>
									{{ wifi.SSID }}
								</td>
								<td>
									{{ wifi.RSSI }}
								</td>
								<td>
									{{ wifi.ENC }}
								</td>
								<td>
									<input type="password" v-on:keyup.enter="addNetwork($event, wifi.SSID)">
								</td>
							</tr>
						</tbody>
					</table>
				</details>
			</div>
			<div id="updates" style="padding-left: 1em">
				<details>
					<summary class="add_curser_pointer" v-on:click="findUpdates()">
						Updates <img src="icons/material-icons/update_black_24dp.svg" alt="Updates">
					</summary>
					<ul>
						<li>
							Firmware Version: <span style="color:blue">{{ current_firmware_version }}</span>
							<span style="color:red" v-if:"current_firmware_version<new_firmware_version">...update to {{ new_firmware_version }}</span>
							<img src="icons/material-icons/system_update_alt_black_24dp.svg" alt="Firmware-Update"
								class="add_curser_pointer" v-if:"current_firmware_version<new_firmware_version" v-on:click="updateFirmware()">
						</li>
						<li>
							Website Version: <span style="color:blue">{{ current_website_version }}</span>
							<span style="color:red" v-if:"current_website_version<new_website_version">...update to {{ new_website_version }}</span>
							<img src="icons/material-icons/browser_updated_black_24dp.svg" alt="Website-Update"
								class="add_curser_pointer" v-if:"current_website_version<new_website_version" v-on:click="updateWebsite()">
						</li>
					</ul>
				</details>
			</div>
		</details>
	</div>

</body>
<script src="index.js">
</script>

</html>